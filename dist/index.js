(function(global,factory){if(typeof define==='function'&&define.amd){define(['module','react'],factory)}else if(typeof exports!=='undefined'){factory(module,require('react'))}else{var mod={exports:{}};factory(mod,global.react);global.index=mod.exports}})(this,function(module,_react){'use strict';var _react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called')}return call&&(typeof call==='object'||typeof call==='function')?call:self}function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}//import style from 'animate.css';
var styles={wapper:{display:'block',marginLeft:'auto',marginRight:'auto',overflow:'hidden'},slide:{position:'absolute'},bottom:{marginTop:'1px',marginBottom:'1px',display:'block',position:'relative'},thumbnail:{overflow:'hidden',height:'150px',display:'inline-block',position:'relative'},main:{display:'block',overflow:'hidden',position:'relative'},blackFilter:{backgroundColor:'#000',opacity:'0.6',position:'absolute',width:'100%',height:'100%',top:'0px',left:'0px'}};var AnimateCarousel=function(_React$Component){_inherits(AnimateCarousel,_React$Component);function AnimateCarousel(props){_classCallCheck(this,AnimateCarousel);var _this=_possibleConstructorReturn(this,(AnimateCarousel.__proto__||Object.getPrototypeOf(AnimateCarousel)).call(this,props));_this.state={sliderCount:_this.props.children.length,currentSlider:0,appearType:'fadeIn animated',disappearType:'fadeOut animated'};_this.config={animateType:_this.props.animateType||'fade',autoplay:_this.props.autoplay||'true',speed:_this.props.speed||4000,thumbnail:_this.props.thumbnail||'true',height:_this.props.height||'',width:_this.props.width||''};_this.t=null;_this.autoplay=_this.autoplay.bind(_this);_this.changeSlide=_this.changeSlide.bind(_this);_this.goToSilde=_this.goToSilde.bind(_this);return _this}_createClass(AnimateCarousel,[{key:'componentDidMount',value:function componentDidMount(){var _this2=this;if(this.config.autoplay||this.props.autoplay){this.t=setInterval(function(){_this2.autoplay()},this.config.speed)};var appearType,disappearType;switch(this.config.animateType){case'fade':appearType='fadeIn animated';disappearType='fadeOut animated';break;case'slide':appearType='slideInRight animated';disappearType='slideOutLeft animated';break;case'rotate':appearType='rotateInDownRight animated';disappearType='rotateOutDownLeft animated';break;case'flip':appearType='flipInX animated';disappearType='flipOutX animated';break;case'bounce':appearType='bounceIn animated';disappearType='bounceOut animated';break;case'zoom':appearType='zoomIn animated';disappearType='zoomOut animated';break;default:appearType='fadeIn animated';disappearType='fadeOut animated';};this.setState({appearType:appearType,disappearType:disappearType})}},{key:'componentWillUnmount',value:function componentWillUnmount(){clearInterval(this.t)}},{key:'autoplay',value:function autoplay(){if(this.state.currentSlider==this.state.sliderCount-1){this.changeSlide(0)}else{this.changeSlide(this.state.currentSlider+1)}}},{key:'goToSilde',value:function goToSilde(nextPage){var _this3=this;clearInterval(this.t);setTimeout(function(){_this3.changeSlide(nextPage);if(_this3.config.autoplay){_this3.t=setInterval(function(){_this3.autoplay()},_this3.config.speed)}},50)}},{key:'changeSlide',value:function changeSlide(nextPage){var next=this.refs[nextPage];var current=this.refs[this.state.currentSlider];next.className=this.state.appearType;current.className=this.state.disappearType;this.setState({currentSlider:nextPage})}},{key:'render',value:function render(){var _this4=this;var thumbnails=null;if(this.props.thumbnail){thumbnails=this.props.children.map(function(item,ii){var width=100/_this4.props.children.length+'%';if(ii!==0){return _react2.default.createElement('a',{key:'thumbnail'+ii,onClick:function onClick(){return _this4.goToSilde(ii)}},_react2.default.createElement('div',{style:_extends({},styles.thumbnail,{width:width})},item,_react2.default.createElement('div',{style:styles.blackFilter})))}else{return _react2.default.createElement('a',{key:'thumbnail'+ii,onClick:function onClick(){return _this4.goToSilde(ii)}},_react2.default.createElement('div',{style:_extends({},styles.thumbnail,{width:width})},item,_react2.default.createElement('div',{style:styles.blackFilter})))}})}var slides=this.props.children.map(function(item,ii){if(ii!==0){return _react2.default.createElement('div',{style:styles.slide,key:ii,ref:ii,className:_this4.state.disappearType},item)}else{return _react2.default.createElement('div',{style:styles.slide,key:ii,ref:ii,className:_this4.state.appearType},item)}});return _react2.default.createElement('div',_defineProperty({style:styles.wapper},'style',this.props.style),_react2.default.createElement('div',{style:_extends({},styles.main,{height:this.props.height||'600px'})},slides),_react2.default.createElement('div',{style:_extends({},styles.bottom,{display:thumbnails?'block':'none'})},thumbnails?thumbnails:null))}}]);return AnimateCarousel}(_react2.default.Component);module.exports=AnimateCarousel});

